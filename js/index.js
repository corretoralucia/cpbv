var initPhotoSwipeFromDOM=function(b){for(var c=function(q){for(var u,v,w,x,r=q.childNodes,s=r.length,t=[],y=0;y<s;y++)(u=r[y],1===u.nodeType)&&(v=u.children[0],w=v.getAttribute('data-size').split('x'),x={src:v.getAttribute('href'),w:parseInt(w[0],10),h:parseInt(w[1],10)},1<u.children.length&&(x.title=u.children[1].innerHTML),0<v.children.length&&(x.msrc=v.children[0].getAttribute('src')),x.el=u,t.push(x));return t},d=function p(q,r){return q&&(r(q)?q:p(q.parentNode,r))},f=function(q){q=q||window.event,q.preventDefault?q.preventDefault():q.returnValue=!1;var r=q.target||q.srcElement,s=d(r,function(z){return z.tagName&&'FIGURE'===z.tagName.toUpperCase()});if(s){for(var x,t=s.parentNode,u=s.parentNode.childNodes,v=u.length,w=0,y=0;y<v;y++)if(1===u[y].nodeType){if(u[y]===s){x=w;break}w++}return 0<=x&&h(x,t),!1}},g=function(){var q=window.location.hash.substring(1),r={};if(5>q.length)return r;for(var s=q.split('&'),t=0;t<s.length;t++)if(s[t]){var u=s[t].split('=');2>u.length||(r[u[0]]=u[1])}return r.gid&&(r.gid=parseInt(r.gid,10)),r},h=function(q,r,s,t){var v,w,x,u=document.querySelectorAll('.pswp')[0];if(x=c(r),w={galleryUID:r.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(A){var B=x[A].el.getElementsByTagName('img')[0],C=window.pageYOffset||document.documentElement.scrollTop,D=B.getBoundingClientRect();return{x:D.left,y:D.top+C,w:D.width}}},!t)w.index=parseInt(q,10);else if(w.galleryPIDs){for(var y=0;y<x.length;y++)if(x[y].pid==q){w.index=y;break}}else w.index=parseInt(q,10)-1;isNaN(w.index)||(s&&(w.showAnimationDuration=0),v=new PhotoSwipe(u,PhotoSwipeUI_Default,x,w),v.init())},k=document.querySelectorAll(b),m=0,n=k.length;m<n;m++)k[m].setAttribute('data-pswp-uid',m+1),k[m].onclick=f;var o=g();o.pid&&o.gid&&h(o.pid,k[o.gid-1],!0,!0)};initPhotoSwipeFromDOM('.my-gallery');